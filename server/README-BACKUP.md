# æ•°æ®å¤‡ä»½å’Œæ¢å¤æŒ‡å—

## ğŸ” ä¸ºä»€ä¹ˆéœ€è¦å¤‡ä»½ï¼Ÿ

é˜²æ­¢ä»¥ä¸‹æƒ…å†µå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ï¼š
- ğŸ› Bugä¿®å¤æ—¶éœ€è¦æ¸…ç†é”™è¯¯æ•°æ®
- ğŸ’» æœåŠ¡å™¨æ•…éšœ
- ğŸ‘¤ äººä¸ºæ“ä½œå¤±è¯¯
- ğŸ”„ æ•°æ®è¿ç§»

## ğŸ“¦ å¤‡ä»½æ•°æ®

### æ‰‹åŠ¨å¤‡ä»½
```bash
cd server
node backup-database.js
```

å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨ `server/backups/` ç›®å½•ï¼Œæ ¼å¼ï¼š
```
backup-2026-02-02T12-30-45.json
```

### è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¨èï¼‰
è®¾ç½®å®šæ—¶ä»»åŠ¡æ¯å¤©è‡ªåŠ¨å¤‡ä»½ï¼š

**Mac/Linux (crontab):**
```bash
# æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * cd /path/to/server && node backup-database.js
```

**Windows (ä»»åŠ¡è®¡åˆ’ç¨‹åº):**
1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡
3. è§¦å‘å™¨ï¼šæ¯å¤© 2:00 AM
4. æ“ä½œï¼šå¯åŠ¨ç¨‹åº `node`
5. å‚æ•°ï¼š`backup-database.js`
6. èµ·å§‹äºï¼šæœåŠ¡å™¨ç›®å½•è·¯å¾„

## ğŸ”„ æ¢å¤æ•°æ®

### æŸ¥çœ‹å¯ç”¨å¤‡ä»½
```bash
node restore-database.js
```

### æ¢å¤ç‰¹å®šå¤‡ä»½
```bash
node restore-database.js backups/backup-2026-02-02T12-30-45.json
```

âš ï¸ **è­¦å‘Š**: æ¢å¤ä¼šåˆ é™¤å½“å‰æ‰€æœ‰æ•°æ®ï¼

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

### 1. å®šæœŸå¤‡ä»½
- âœ… æ¯å¤©è‡ªåŠ¨å¤‡ä»½
- âœ… é‡è¦æ“ä½œå‰æ‰‹åŠ¨å¤‡ä»½
- âœ… ä¿ç•™æœ€è¿‘30å¤©çš„å¤‡ä»½

### 2. å¤šåœ°å­˜å‚¨
- âœ… æœ¬åœ°å¤‡ä»½
- âœ… äº‘å­˜å‚¨ï¼ˆGoogle Drive, Dropboxï¼‰
- âœ… å¦ä¸€å°æœåŠ¡å™¨

### 3. æµ‹è¯•æ¢å¤
- âœ… å®šæœŸæµ‹è¯•æ¢å¤æµç¨‹
- âœ… ç¡®ä¿å¤‡ä»½æ–‡ä»¶å®Œæ•´

## ğŸ“‹ æœ€ä½³å®è·µ

### ä¿®å¤Bugå‰
```bash
# 1. å…ˆå¤‡ä»½
node backup-database.js

# 2. è®°å½•å¤‡ä»½æ–‡ä»¶å
# backup-2026-02-02T12-30-45.json

# 3. æ‰§è¡Œä¿®å¤æ“ä½œ
node fix-something.js

# 4. å¦‚æœå‡ºé”™ï¼Œç«‹å³æ¢å¤
node restore-database.js backups/backup-2026-02-02T12-30-45.json
```

### é‡ç½®æ•°æ®å‰
```bash
# ç°åœ¨ reset-all-data.js ä¼šè‡ªåŠ¨å¤‡ä»½
node reset-all-data.js

# å¦‚æœéœ€è¦æ¢å¤ï¼ŒæŸ¥çœ‹æœ€æ–°å¤‡ä»½
node restore-database.js
```

## ğŸ” å¤‡ä»½æ–‡ä»¶å†…å®¹

å¤‡ä»½æ–‡ä»¶åŒ…å«ï¼š
```json
{
  "timestamp": "2026-02-02T12:30:45.000Z",
  "counts": {
    "users": 12,
    "tasks": 25,
    "wallets": 12,
    "evidences": 10
  },
  "data": {
    "users": [...],
    "tasks": [...],
    "wallets": [...],
    "evidences": [...]
  }
}
```

## ğŸš¨ ç´§æ€¥æ¢å¤

å¦‚æœæ•°æ®æ„å¤–ä¸¢å¤±ï¼š

1. **ç«‹å³åœæ­¢æ‰€æœ‰æ“ä½œ**
2. **æ‰¾åˆ°æœ€è¿‘çš„å¤‡ä»½æ–‡ä»¶**
   ```bash
   ls -lt backups/
   ```
3. **æ¢å¤æ•°æ®**
   ```bash
   node restore-database.js backups/[æœ€æ–°å¤‡ä»½æ–‡ä»¶]
   ```
4. **éªŒè¯æ•°æ®å®Œæ•´æ€§**
5. **é€šçŸ¥æ‰€æœ‰ç”¨æˆ·**

## ğŸ“ è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. ä¿ç•™æ‰€æœ‰å¤‡ä»½æ–‡ä»¶
2. è®°å½•é”™è¯¯ä¿¡æ¯
3. è”ç³»æŠ€æœ¯æ”¯æŒ
